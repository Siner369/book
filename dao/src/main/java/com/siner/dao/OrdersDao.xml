<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.siner.dao.OrdersDao">
    <resultMap id="OrdersMap" type="com.siner.entity.Orders">
        <id property="oid" column="oid"/>
        <id property="uid" column="uid"/>
        <result property="uid" column="uid"/>
        <result property="uaddress" column="uaddress"/>
        <result property="utel" column="utel"/>
        <result property="buytime" column="buytime"/>
        <result property="sum" column="sum"/>
        <result property="state" column="state"/>

        <!--<association property="OrdersIteam" javaType="com.siner.entity.OrdersIteam">
            <id property="ooid" column="ooid"/>
            <result property="bid" column="bid"/>
            <result property="oocount" column="oocount"/>
            <result property="IteamSum" column="IteamSum"/>
        </association>

        <association property="Book" javaType="com.siner.entity.Book">
            <id property="bid" column="bid"/>
            <result property="bname" column="bname"/>
        </association>-->
    </resultMap>

    <insert id="addOrder" parameterType="com.siner.entity.Orders">
        insert into orders(oid,uid,uaddress,utel,buytime,sum,state)
        values(#{oid},#{uid},#{uaddress},#{utel},#{buytime},#{sum},#{state})
	</insert>

    <select id="findAllOrder" resultMap="OrdersMap" parameterType="java.util.Map">
       select *from  Orders left outer join  OrdersIteam on Orders.oid = OrdersIteam.oid
         left outer join book on OrdersIteam.bid = Book.bid
        where Orders.uid = #{uid}
    </select>
    

</mapper>

